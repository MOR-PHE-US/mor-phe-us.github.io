"use strict";(self.webpackChunksuidx=self.webpackChunksuidx||[]).push([[655],{411:(i,s,a)=>{a.r(s),a.d(s,{comp:()=>n,data:()=>l});var t=a(2565);const e={},n=(0,a(7459).A)(e,[["render",function(i,s){return(0,t.uX)(),(0,t.CE)("div",null,[...s[0]||(s[0]=[(0,t.Fv)('<div class="hint-container tip"><p class="hint-container-title">提示</p><p>ImmortalWrt 作为主路由的使用日常</p></div><h3 id="从u盘写入磁盘" tabindex="-1"><a class="header-anchor" href="#从u盘写入磁盘"><span>从 U 盘写入磁盘</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 在一个终端运行：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">umount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/nvme0n1p</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/dev/null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">parted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/nvme0n1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mklabel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gpt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> if=/dev/sda</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of=/dev/nvme0n1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bs=1M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> conv=fsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;) &amp;&amp; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DD_PID</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">$!</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">while</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kill</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -USR1</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $DD_PID</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;/</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dev</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">do</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sleep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">done</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">wait</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $DD_PID</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sync</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="通过ssh-key连接到immortalwrt" tabindex="-1"><a class="header-anchor" href="#通过ssh-key连接到immortalwrt"><span>通过 SSH Key 连接到 ImmortalWrt</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ssh-keygen</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ed25519</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ImmortalWrt&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>将公钥（.pub 文件）内容</strong>添加到 ImmortalWrt 的：</p><p><code>/etc/dropbear/authorized_keys</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 600</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/dropbear/authorized_keys</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="用到的软件" tabindex="-1"><a class="header-anchor" href="#用到的软件"><span>用到的软件</span></a></h3><p><strong>系统</strong></p><ul><li><a href="https://github.com/sirpdboy/luci-app-partexp" target="_blank" rel="noopener noreferrer">分区扩容（luci-app-partexp）</a></li><li><a href="https://www.openappfilter.com/#/" target="_blank" rel="noopener noreferrer">应用过滤（luci-app-appfilter）</a></li></ul><p><strong>文件</strong></p><ul><li>Dufs（luci-app-dufs）</li><li>统一文件共享（luci-app-unishare）</li></ul><p><strong>iStore</strong></p><ul><li>系统便利工具（luci-app-systools）</li><li>1Panel（istorepanel）</li><li>Lucky</li></ul><p><strong>流量分载</strong></p><ul><li><a href="https://github.com/chenmozhijin/turboacc" target="_blank" rel="noopener noreferrer">Turbo ACC（luci-app-turboacc）</a></li></ul><p><strong>管控</strong></p><ul><li>AdBlock Fast（luci-app-adblock-fast）</li><li><a href="https://github.com/sirpdboy/luci-app-timecontrol" target="_blank" rel="noopener noreferrer">时间控制（luci-app-nft-timecontrol）</a></li><li><a href="https://github.com/sirpdboy/luci-app-taskplan" target="_blank" rel="noopener noreferrer">任务设置（luci-app-taskplan）</a></li><li><a href="https://plugin.vumstar.com/download/luci-app-uninstall.run" target="_blank" rel="noopener noreferrer">高级卸载（luci-app-uninstall）</a></li></ul>',19)])])}]]),l=JSON.parse('{"path":"/popular/openwrt.html","title":"OpenWRT 使用","lang":"zh-CN","frontmatter":{"title":"OpenWRT 使用","icon":"cog","tag":["路由器","ImmortalWrt","NAS"],"date":"2023-07-22T00:00:00.000Z","description":"提示 ImmortalWrt 作为主路由的使用日常 从 U 盘写入磁盘 通过 SSH Key 连接到 ImmortalWrt 将公钥（.pub 文件）内容添加到 ImmortalWrt 的： /etc/dropbear/authorized_keys 用到的软件 系统 分区扩容（luci-app-partexp） 应用过滤（luci-app-appfi...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"OpenWRT 使用\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-07-22T00:00:00.000Z\\",\\"dateModified\\":\\"2025-12-14T14:09:37.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Morpheus\\",\\"url\\":\\"https://suidx.com\\"}]}"],["meta",{"property":"og:url","content":"https://suidx.com/popular/openwrt.html"}],["meta",{"property":"og:site_name","content":"Morpheus"}],["meta",{"property":"og:title","content":"OpenWRT 使用"}],["meta",{"property":"og:description","content":"提示 ImmortalWrt 作为主路由的使用日常 从 U 盘写入磁盘 通过 SSH Key 连接到 ImmortalWrt 将公钥（.pub 文件）内容添加到 ImmortalWrt 的： /etc/dropbear/authorized_keys 用到的软件 系统 分区扩容（luci-app-partexp） 应用过滤（luci-app-appfi..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-14T14:09:37.000Z"}],["meta",{"property":"article:tag","content":"NAS"}],["meta",{"property":"article:tag","content":"ImmortalWrt"}],["meta",{"property":"article:tag","content":"路由器"}],["meta",{"property":"article:published_time","content":"2023-07-22T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-14T14:09:37.000Z"}]]},"git":{"createdTime":1765721377000,"updatedTime":1765721377000,"contributors":[{"name":"Morpheus","username":"Morpheus","email":"example@cn.com","commits":1,"url":"https://github.com/Morpheus"}]},"readingTime":{"minutes":0.72,"words":216},"filePathRelative":"popular/openwrt.md","excerpt":"<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>ImmortalWrt 作为主路由的使用日常</p>\\n</div>\\n<h3>从 U 盘写入磁盘</h3>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-bash\\"><span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 在一个终端运行：</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">umount</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /dev/nvme0n1p</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E5C07B\\">*</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> 2&gt;</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">/dev/null</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> &amp;&amp; </span><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">\\\\</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">parted</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /dev/nvme0n1</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> mklabel</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> gpt</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> &amp;&amp; </span><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">\\\\</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">dd</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> if=/dev/sda</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> of=/dev/nvme0n1</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> bs=1M</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> conv=fsync</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> &amp;) &amp;&amp; </span><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">\\\\</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">DD_PID</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E5C07B\\">$!</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> &amp;&amp; </span><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">\\\\</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">while</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> kill</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -USR1</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\"> $DD_PID</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 2</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">&gt;/</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">dev</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">/</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">null</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">; </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">do</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\"> sleep</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 5</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">; </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">done</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> &amp;&amp; </span><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">wait</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\"> $DD_PID</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> &amp;&amp; </span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">sync</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}')},7459:(i,s)=>{s.A=(i,s)=>{const a=i.__vccOpts||i;for(const[i,t]of s)a[i]=t;return a}}}]);